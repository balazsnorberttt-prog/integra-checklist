<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INTEGRA MOBILE CHECKLIST v6</title>
    <style>
        /* --- ALAPOK (MOBILRA OPTIMALIZ√ÅLVA) --- */
        body {
            background-color: #121212;
            color: #ffffff;
            font-family: sans-serif;
            margin: 0;
            padding: 15px;
            padding-bottom: 100px; /* Hely a gombnak */
            line-height: 1.5;
        }

        /* --- ST√çLUSOK --- */
        h1 { color: #00bcd4; font-size: 1.2rem; margin: 0 0 5px 0; text-transform: uppercase; }
        .subtitle { color: #888; font-size: 0.8rem; margin-bottom: 15px; display: block; }
        
        .card {
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px; /* T√©rk√∂z a k√°rty√°k k√∂z√∂tt */
        }

        /* --- BEVITELI MEZ≈êK --- */
        label { display: block; color: #00bcd4; font-size: 0.8rem; font-weight: bold; margin-bottom: 5px; }
        input[type="text"] {
            width: 100%; padding: 10px; background: #2c2c2c; border: 1px solid #444; 
            color: #fff; border-radius: 5px; box-sizing: border-box; font-size: 1rem;
            margin-bottom: 15px;
        }

        /* --- SZEKCI√ì C√çMEK --- */
        .section-header {
            background: #252525;
            color: #00bcd4;
            padding: 12px;
            font-weight: bold;
            margin-top: 20px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 5px solid #00bcd4;
            cursor: pointer;
            display: flex; justify-content: space-between;
        }
        
        .section-content { display: none; }
        .section-content.active { display: block; }

        /* --- CHECKLIST ELEMEK --- */
        .item-box {
            background: #181818;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        /* St√°tusz jel√∂l√©s sz√≠nekkel */
        .item-box[data-status="OK"] { border-left: 5px solid #00e676; }
        .item-box[data-status="NOK"] { border-left: 5px solid #ff5252; }

        .id-tag { 
            background: #333; color: #00bcd4; padding: 2px 6px; 
            font-size: 0.75rem; font-weight: bold; border-radius: 4px; 
            display: inline-block; margin-bottom: 8px;
        }
        
        .q-text { font-size: 1rem; margin-bottom: 15px; font-weight: 500; }

        /* --- GOMBOK --- */
        .btn-row { display: flex; gap: 8px; margin-bottom: 10px; }
        
        button {
            flex: 1; padding: 12px; border: none; border-radius: 6px; 
            font-weight: bold; font-size: 0.9rem; cursor: pointer; color: #fff;
        }

        .btn-guide { flex: 0 0 40px; background: #333; color: #00bcd4; font-size: 1.2rem; }
        .btn-ok { background: #1b5e20; opacity: 0.6; }
        .btn-nok { background: #b71c1c; opacity: 0.6; }

        /* Akt√≠v gombok */
        .btn-ok.active { background: #00e676; color: #000; opacity: 1; box-shadow: 0 0 10px rgba(0,230,118,0.5); }
        .btn-nok.active { background: #ff5252; color: #fff; opacity: 1; box-shadow: 0 0 10px rgba(255,82,82,0.5); }

        /* --- LE√çR√ÅS & FOT√ì (REJTETT) --- */
        .details { display: none; margin-top: 15px; border-top: 1px dashed #444; padding-top: 15px; }
        
        .guide-text { 
            background: rgba(0, 188, 212, 0.15); color: #ddd; 
            padding: 10px; border-radius: 5px; font-size: 0.9rem; margin-bottom: 10px; 
        }

        textarea {
            width: 100%; background: #000; color: #fff; border: 1px solid #444; 
            padding: 10px; border-radius: 5px; box-sizing: border-box; min-height: 60px;
        }

        .file-upload {
            display: block; margin-top: 10px; background: #333; color: #00bcd4; 
            padding: 10px; text-align: center; border-radius: 5px; border: 1px dashed #00bcd4;
        }
        
        .img-preview { width: 100%; margin-top: 10px; display: none; border-radius: 5px; border: 1px solid #555; }

        /* --- LEBEG≈ê GOMB (FIX) --- */
        .floating-footer {
            position: fixed; bottom: 0; left: 0; right: 0; 
            background: #1e1e1e; padding: 15px; border-top: 1px solid #333; 
            display: flex; gap: 10px; align-items: center; z-index: 999;
        }
        
        .save-btn {
            background: #00bcd4; color: #000; border: none; padding: 15px; 
            width: 100%; font-size: 1.1rem; font-weight: bold; border-radius: 50px;
        }

        .score-display { font-size: 1.5rem; font-weight: bold; color: #00bcd4; min-width: 60px; text-align: center; }

        /* --- NYOMTAT√ÅS (PDF EXPORT) ST√çLUSOK --- */
        @media print {
            body { background: #fff; color: #000; padding: 0; margin: 0; }
            .card, .item-box { border: none; border-bottom: 1px solid #ccc; margin: 0; padding: 10px 0; page-break-inside: avoid; background: #fff; }
            .section-header { background: #eee; color: #000; border: none; border-bottom: 2px solid #000; margin-top: 20px; }
            .section-content { display: block !important; } /* Mindent kinyit */
            h1 { color: #000; }
            label { color: #000; }
            input[type="text"], textarea { border: 1px solid #ccc; background: #fff; color: #000; }
            
            /* Elt√ºntetj√ºk a felesleges gombokat nyomtat√°skor */
            .btn-guide, .file-upload, .floating-footer { display: none !important; }
            
            /* Csak a v√°lasztott st√°tusz maradjon l√°that√≥, sz√∂vegesen */
            .btn-row { justify-content: flex-start; }
            button { display: none; }
            button.active { display: inline-block; border: 1px solid #000; background: #fff !important; color: #000 !important; opacity: 1; padding: 5px 10px; width: auto; flex: none; }
            
            .details { display: block !important; border: none; } /* Kommentek l√°tsz√≥djanak */
            .guide-text { display: none; } /* √ötmutat√≥ sz√∂veg nem kell a PDF-re */
            .img-preview { max-width: 300px; display: block; }
        }

    </style>
</head>
<body>

<div class="card">
    <h1>Integra Checklist v6</h1>
    <span class="subtitle">Mobile Optimaliz√°lt Verzi√≥</span>
    
    <label>BERENDEZ√âS NEVE</label>
    <input type="text" id="devName" placeholder="pl. OP10">
    
    <label>ELLEN≈êR NEVE</label>
    <input type="text" id="opName" placeholder="N√©v...">
</div>

<div id="checklist-root"></div>

<div class="floating-footer">
    <div class="score-display" id="score">0%</div>
    <button class="save-btn" onclick="exportPDF()">PDF MENT√âSE (NYOMTAT√ÅS)</button>
</div>

<script>
    // --- ADATB√ÅZIS (Minden pont benne van) ---
    const data = [
        {
            cat: "1.1.0 H√ÅL√ìZAT",
            items: [
                { id: "1.1.1", t: "H√°l√≥zati telep√≠t√©s el≈ë√≠r√°s szerinti?", g: "PC-k az utols√≥ r√©sztvev≈ëk? Windows PC-k ugyanabban a 'Pull'-ban l√©v≈ë E/A modulhoz csatlakoznak?" },
                { id: "1.1.2", t: "G√©pn√©v egyedi √©s egyeztetve?", g: "Egy√©rtelm≈± elnevez√©s." },
                { id: "1.1.3", t: "Ondeso tool futott?", g: "Domain, h√°l√≥zat be√°ll√≠tva?" }
            ]
        },
        {
            cat: "1.2.0 STANDARD SZOFTVER",
            items: [
                { id: "1.2.1", t: "Image Verzi√≥ aktu√°lis?", g: "Win10 Ent 2019 LTSC, BluePC Image ZAS." },
                { id: "1.2.2", t: "TIA Portal verzi√≥ megfelel≈ë?", g: "V16 UB vagy aktu√°lis." },
                { id: "1.2.3", t: "Safety verzi√≥ megfelel≈ë?", g: "Safety komponensek verzi√≥ja." },
                { id: "1.2.4", t: "Integra Designer verzi√≥?", g: "System Manager -> Update range." }
            ]
        },
        {
            cat: "1.3.0 - 1.4.0 RENDSZER",
            items: [
                { id: "1.3.1", t: "PC c√≠mk√©z√©s & Visu fel√©p√≠t√©s?", g: "Pult jel√∂l√©s fizikai c√≠mk√©vel." },
                { id: "1.4.1", t: "Rendszerdiagnosztika hiba n√©lk√ºl?", g: "Nincs piros az Anlagendiagnose-ban." },
                { id: "1.4.2", t: "IntegraCheck OK?", g: "Minden z√∂ld a men√ºben." },
                { id: "1.4.3", t: "Mozg√°sk√©pek rendben?", g: "Ir√°nyok, csoportos√≠t√°s j√≥?" },
                { id: "1.4.4", t: "Interf√©sz k√©pek rendben?", g: "Kapcsol√≥d√°sok l√°that√≥ak?" },
                { id: "1.4.5", t: "Sablonok eredetiek?", g: "SystemTemplates.zip nem m√≥dosult." },
                { id: "1.4.6", t: "Scriptek dokument√°lva?", g: "Van egyedi script?" },
                { id: "1.4.7", t: "Nyelv be√°ll√≠tva?", g: "Projekt√°l√°s el≈ëtt." }
            ]
        },
        {
            cat: "1.6.0 KIEG√âSZ√çT√âSEK",
            items: [
                { id: "1.6.1", t: "Mintaprojektek betartva?", g: "RB, MO standardok." },
                { id: "1.6.2", t: "Tech param√©terek j√≥ helyen?", g: "Megfelel≈ë mappastrukt√∫ra." },
                { id: "1.6.3", t: "IntegraShell konfigur√°ci√≥?", g: "Tiltja a Windows hozz√°f√©r√©st?" },
                { id: "1.6.4", t: "EKM kapcsolat?", g: "Update jelz√©s." },
                { id: "1.6.5", t: "isiSave be√°ll√≠tva?", g: "Archiv√°l√°s m≈±k√∂dik." },
                { id: "1.6.6", t: "Index-Szerver OK?", g: "Online st√°tusz." },
                { id: "1.6.8", t: "SIS Log tiszta?", g: "Nincs hiba a logban." },
                { id: "1.6.9", t: "Mappastrukt√∫ra OK?", g: "D:/CMWProjects/..." },
                { id: "1.6.10", t: "Szem√©t t√∂r√∂lve?", g: "Csak 1 TIA projekt van." },
                { id: "1.6.11", t: "V√≠rusirt√≥ friss√ºl?", g: "Akt√≠v v√©delem." }
            ]
        },
        {
            cat: "2.1.0 PLC (SPS)",
            items: [
                { id: "2.1.1", t: "Minden PLC ter√ºlet l√°tszik?", g: "V√°laszt√≥ k√©perny≈ën." },
                { id: "2.1.2", t: "Minden ter√ºletnek van k√©pe?", g: "Megnyithat√≥." },
                { id: "2.1.3", t: "Full HD felbont√°s?", g: "1920x1080." },
                { id: "2.1.4", t: "Calibri 10 Bold?", g: "Szabv√°ny bet≈±t√≠pus." },
                { id: "2.1.5", t: "Pult 99 (Nyers) ablak?", g: "Helyettes√≠t≈ë k√©p." },
                { id: "2.1.6", t: "PNG √°tl√°tsz√≥ k√©pek?", g: "Max 100KB m√©ret." }
            ]
        },
        {
            cat: "2.2.0 - 2.6.0 K√âPERNY≈êK",
            items: [
                { id: "2.2.1", t: "√Åttekint≈ë k√©pek OK?", g: "Guideline szerint." },
                { id: "2.3.1", t: "Pult k√©pek OK?", g: "Guideline szerint." },
                { id: "2.4.1", t: "√Ållom√°s k√©pek OK?", g: "Guideline szerint." },
                { id: "2.5.1", t: "Speci√°lis funkci√≥k OK?", g: "Guideline szerint." },
                { id: "2.5.4", t: "Robot √°ttekint≈ëk OK?", g: "Guideline szerint." },
                { id: "2.6.1", t: "Nincs Station/Pult elem?", g: "Dupla hiba elker√ºl√©se." },
                { id: "2.6.2", t: "V√©szle√°ll√≠t√≥ (SonderBit)?", g: "Nem a list√°b√≥l, hanem SonderBit!" },
                { id: "2.6.3", t: "R√©szletk√©pek OK?", g: "Guideline szerint." }
            ]
        }
    ];

    // --- RENDEREL√âS ---
    const root = document.getElementById('checklist-root');

    function render() {
        data.forEach((section, index) => {
            // Szekci√≥ Fejl√©c
            const h = document.createElement('div');
            h.className = 'section-header';
            h.innerHTML = `<span>${section.cat}</span> <span>‚ñº</span>`;
            // Mobilon k√∂nnyebb, ha az els≈ë kiv√©tel√©vel csukva vannak, de nyithat√≥ak
            h.onclick = () => { 
                document.getElementById(`sec-${index}`).classList.toggle('active'); 
            };

            const c = document.createElement('div');
            c.id = `sec-${index}`;
            c.className = 'section-content';
            if(index === 0) c.classList.add('active'); // Csak az els≈ë nyitva

            section.items.forEach(item => {
                const uid = item.id.replace(/\./g, '_');
                c.innerHTML += `
                    <div class="item-box" id="box-${uid}">
                        <span class="id-tag">${item.id}</span>
                        <div class="q-text">${item.t}</div>
                        
                        <div class="btn-row">
                            <button class="btn-guide" onclick="toggleDetails('${uid}')">?</button>
                            <button class="btn-ok" onclick="setState('${uid}', 'OK')">MEGFELEL≈ê</button>
                            <button class="btn-nok" onclick="setState('${uid}', 'NOK')">HIB√ÅS</button>
                        </div>

                        <div class="details" id="det-${uid}">
                            <div class="guide-text">üí° ${item.g}</div>
                            <textarea placeholder="Megjegyz√©s..." id="com-${uid}"></textarea>
                            <label class="file-upload">
                                üì∑ Fot√≥ csatol√°sa
                                <input type="file" accept="image/*" style="display:none" onchange="loadFile(event, '${uid}')">
                            </label>
                            <img id="img-${uid}" class="img-preview">
                        </div>
                    </div>
                `;
            });

            root.appendChild(h);
            root.appendChild(c);
        });
    }

    // --- FUNKCI√ìK ---
    function toggleDetails(uid) {
        const el = document.getElementById(`det-${uid}`);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    function setState(uid, status) {
        const box = document.getElementById(`box-${uid}`);
        const btns = box.querySelectorAll('.btn-row button');
        
        // Reset gombok
        btns[1].classList.remove('active');
        btns[2].classList.remove('active');

        box.setAttribute('data-status', status);

        if(status === 'OK') {
            btns[1].classList.add('active');
        } else {
            btns[2].classList.add('active');
            // Hiba eset√©n automatikusan ny√≠ljon le a komment szekci√≥
            document.getElementById(`det-${uid}`).style.display = 'block';
        }
        calcScore();
    }

    function loadFile(event, uid) {
        const img = document.getElementById(`img-${uid}`);
        img.src = URL.createObjectURL(event.target.files[0]);
        img.style.display = 'block';
        // Ha fot√≥t t√∂lt fel, nyissuk meg a panelt biztos ami biztos
        document.getElementById(`det-${uid}`).style.display = 'block';
    }

    function calcScore() {
        const total = document.querySelectorAll('.item-box').length;
        const ok = document.querySelectorAll('.item-box[data-status="OK"]').length;
        const pct = Math.round((ok / total) * 100);
        document.getElementById('score').innerText = pct + "%";
    }

    // --- EXPORT FUNKCI√ì (NATIVE PRINT) ---
    function exportPDF() {
        const dName = document.getElementById('devName').value;
        const oName = document.getElementById('opName').value;
        
        if(!dName) { alert("K√©rlek √≠rd be a berendez√©s nev√©t!"); return; }

        document.title = dName + "_Integra_Jelentes"; // Ez lesz a f√°jln√©v
        
        // Figyelmeztet√©s a ment√©s menet√©r≈ël
        alert("A PDF ment√©s√©hez a k√∂vetkez≈ë ablakban v√°laszd a 'Ment√©s PDF-k√©nt' vagy a 'Nyomtat√°s' opci√≥t!");
        
        window.print();
    }

    // Ind√≠t√°s
    render();

</script>

</body>
</html>
