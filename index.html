<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>INTEGRA CHECKLIST V10</title>
    <style>
        /* --- ALAP ST√çLUSOK (S√ñT√âT M√ìD) --- */
        :root {
            --bg: #121212;
            --card: #1e1e1e;
            --primary: #00bcd4;  /* Neon K√©k */
            --success: #00e676;  /* Neon Z√∂ld */
            --danger: #ff5252;   /* Neon Piros */
            --text: #ffffff;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', -apple-system, sans-serif;
            margin: 0;
            padding: 20px;
            padding-bottom: 120px; /* Hely a lebeg≈ë gombnak */
        }

        /* --- K√ÅRTY√ÅK --- */
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #333;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        h1.app-title { 
            color: var(--primary); margin: 0; 
            text-transform: uppercase; font-size: 1.4rem; letter-spacing: 1px;
        }
        .subtitle { 
            color: #888; font-size: 0.9rem; margin-bottom: 20px; 
            display: block; border-bottom: 1px solid #333; padding-bottom: 10px; 
        }

        /* --- BEVITELI MEZ≈êK --- */
        .input-group { margin-bottom: 15px; }
        .input-group label { 
            color: var(--primary); font-size: 0.8rem; 
            font-weight: bold; display: block; margin-bottom: 5px; 
        }
        .input-group input { 
            background: #2c2c2c; border: 1px solid #444; color: #fff; 
            width: 100%; padding: 12px; border-radius: 6px; 
            font-size: 1rem; box-sizing: border-box; 
        }

        /* --- SZEKCI√ìK --- */
        .section-header {
            background: #252525; color: var(--primary); padding: 15px; 
            font-weight: bold; margin-top: 30px; 
            border-left: 4px solid var(--primary); border-radius: 8px; 
            cursor: pointer; display: flex; justify-content: space-between; align-items: center;
        }
        .section-content { display: none; margin-top: 10px; }
        .section-content.active { display: block; }

        /* --- LISTA ELEMEK --- */
        .item-box {
            background: var(--card); padding: 15px; margin-bottom: 15px; 
            border-radius: 8px; border: 1px solid #333; position: relative;
        }
        .item-box[data-status="OK"] { border-left: 6px solid var(--success); }
        .item-box[data-status="NOK"] { border-left: 6px solid var(--danger); }

        .id-tag { 
            background: #333; color: var(--primary); padding: 3px 6px; 
            font-size: 0.75rem; border-radius: 4px; font-weight: bold; 
        }
        .q-text { font-size: 1.05rem; margin: 12px 0; line-height: 1.4; font-weight: 500; }

        /* --- GOMBOK --- */
        .btn-row { display: flex; gap: 10px; margin-top: 15px; }
        button { 
            flex: 1; padding: 12px; border: none; border-radius: 6px; 
            font-weight: bold; cursor: pointer; color: #fff; font-size: 0.9rem;
            transition: opacity 0.2s;
        }
        .btn-guide { flex: 0 0 50px; background: #333; color: var(--primary); font-size: 1.2rem; }
        .btn-ok { background: #1b5e20; opacity: 0.6; }
        .btn-nok { background: #b71c1c; opacity: 0.6; }
        
        .btn-ok.active { background: var(--success); color: #000; opacity: 1; box-shadow: 0 0 10px rgba(0,230,118,0.4); }
        .btn-nok.active { background: var(--danger); color: #fff; opacity: 1; box-shadow: 0 0 10px rgba(255,82,82,0.4); }

        /* --- R√âSZLETEK (Leny√≠l√≥) --- */
        .details { display: none; margin-top: 15px; border-top: 1px dashed #444; padding-top: 15px; }
        .guide-box { 
            background: rgba(0,188,212,0.1); color: #ddd; padding: 12px; 
            border-radius: 6px; font-size: 0.9rem; margin-bottom: 15px; 
            white-space: pre-line; border-left: 2px solid var(--primary);
        }
        textarea { 
            width: 100%; background: #111; color: #fff; border: 1px solid #444; 
            padding: 10px; border-radius: 6px; box-sizing: border-box; min-height: 60px; font-family: inherit;
        }
        .file-upload { 
            display: block; background: #333; color: var(--primary); 
            padding: 12px; text-align: center; margin-top: 10px; 
            border-radius: 6px; border: 1px dashed #555; cursor: pointer;
        }
        .img-preview { width: 100%; max-height: 250px; object-fit: contain; margin-top: 10px; display: none; border: 1px solid #444; border-radius: 4px; }

        /* --- FIX L√ÅBL√âC --- */
        .floating-footer {
            position: fixed; bottom: 0; left: 0; right: 0; 
            background: rgba(30,30,30,0.95); backdrop-filter: blur(5px);
            border-top: 2px solid var(--primary); padding: 15px; 
            display: flex; align-items: center; justify-content: space-between; 
            z-index: 999;
        }
        .score { font-size: 1.5rem; color: var(--primary); font-weight: bold; margin-left: 20px; }
        .save-btn { 
            background: var(--primary); color: #000; padding: 12px 30px; 
            border-radius: 30px; font-weight: bold; margin-right: 20px; border: none; font-size: 1rem;
        }

        /* --- NYOMTAT√ÅS / PDF SPECIALISTA ST√çLUSOK --- */
        #print-header { display: none; }

        @media print {
            @page { margin: 15mm; size: A4; }
            
            body { 
                background: #fff; color: #000; padding: 0; margin: 0; 
                font-family: Arial, sans-serif; font-size: 11px;
            }

            /* Elemek elrejt√©se */
            .floating-footer, .btn-guide, .file-upload, .btn-row button { display: none !important; }
            .subtitle, .section-header span:last-child { display: none; }
            .input-group { display: none; } /* Az inputok helyett a fejl√©cet haszn√°ljuk */
            .card { border: none; box-shadow: none; margin: 0; padding: 0; background: none; color: #000; }

            /* Fejl√©c megjelen√≠t√©se */
            #print-header { 
                display: block; border-bottom: 2px solid #000; 
                margin-bottom: 20px; padding-bottom: 10px; 
            }
            #print-header h1 { font-size: 18px; color: #000; margin-bottom: 10px; text-align: center; }
            .meta-row { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 5px; border-bottom: 1px solid #eee; padding-bottom: 2px;}

            /* Szekci√≥k */
            .section-header { 
                background: #eee !important; color: #000 !important; 
                margin: 20px 0 10px 0 !important; padding: 5px 10px !important;
                border: none !important; border-bottom: 1px solid #000 !important; 
                border-radius: 0 !important; font-size: 12px !important; 
                page-break-after: avoid; 
            }
            .section-content { display: block !important; margin: 0; }

            /* Lista elemek */
            .item-box {
                border: none; border-bottom: 1px dotted #ccc; 
                margin: 0; padding: 10px 0; 
                border-radius: 0; background: none; 
                page-break-inside: avoid; /* EGYBEN TARTJA A BLOKKOT */
            }

            .id-tag { background: none; color: #000; border: 1px solid #000; padding: 1px 4px; font-size: 10px; }
            .q-text { margin: 5px 0; font-weight: bold; font-size: 11px; color: #000; }

            /* St√°tusz ki√≠r√°sa */
            .item-box::after {
                display: block; float: right; font-weight: bold; font-size: 11px; margin-top: -30px;
            }
            .item-box[data-status="OK"]::after { content: "‚úî MEGFELEL≈ê"; color: green; }
            .item-box[data-status="NOK"]::after { content: "‚úñ HIB√ÅS"; color: red; }
            .item-box:not([data-status])::after { content: "‚óã √úRES"; color: #999; }

            /* R√©szletek */
            .guide-box { display: none; }
            .details { display: block !important; border: none; margin: 0; padding: 0; }
            textarea { 
                border: none; background: none; color: #000; padding: 0; 
                font-style: italic; min-height: auto; font-size: 11px;
                display: block; width: 100%; resize: none;
            }
            .img-preview { display: block; max-height: 150px; max-width: 200px; border: 1px solid #ccc; margin-top: 5px; }
        }
    </style>
</head>
<body>

<div id="print-header">
    <h1>INTEGRA ELLEN≈êRZ√âSI JEGYZ≈êK√ñNYV</h1>
    <div class="meta-row">
        <span><strong>Berendez√©s:</strong> <span id="p-dev">-</span></span>
        <span><strong>D√°tum:</strong> <span id="p-date">-</span></span>
    </div>
    <div class="meta-row">
        <span><strong>Ellen≈ër:</strong> <span id="p-op">-</span></span>
        <span><strong>Eredm√©ny:</strong> <span id="p-score">0%</span></span>
    </div>
</div>

<div class="card">
    <h1 class="app-title">Integra Checklist v10</h1>
    <span class="subtitle">Stabil Verzi√≥ (Hivatalos Dokumentum)</span>
    
    <div class="input-group">
        <label>BERENDEZ√âS NEVE</label>
        <input type="text" id="devName" placeholder="pl. OP10" oninput="syncData()">
    </div>
    <div class="input-group">
        <label>ELLEN≈êR NEVE</label>
        <input type="text" id="opName" placeholder="N√©v..." oninput="syncData()">
    </div>
</div>

<div id="root"></div>

<div class="floating-footer">
    <div class="score" id="scoreDisplay">0%</div>
    <button class="save-btn" onclick="savePDF()">PDF MENT√âSE</button>
</div>

<script>
    // --- ADATB√ÅZIS (A PONTOS√çTOTT SZ√ñVEGEKKEL) ---
    const data = [
        { cat: "1.1.0 H√ÅL√ìZAT", items: [
            { id: "1.1.1", t: "H√°l√≥zati telep√≠t√©s el≈ë√≠r√°s szerinti?", g: "Online topol√≥gi√°t megnyitni √©s ellen≈ërizni, hogy a PC-k az utols√≥ r√©sztvev≈ëk-e a h√°l√≥zaton. KP32Fut√°r" },
            { id: "1.1.2", t: "G√©pn√©v egyedi √©s egyeztetve?", g: "G√©pn√©v egyeztetve √©s egy√©rtelm≈±" },
            { id: "1.1.3", t: "Ondeso tool futott?", g: "Ondeso tool rendben fut rajta √©s a h√°l√≥zati √©s a sz√°m√≠t√≥g√©pn√©v, domainba rendez√©s vagy szerver system be van √°ll√≠tva\nA mi image-inket haszn√°lj√°k a PC-k, de v√©gig tudjuk k√©rdezni, ha sz√ºks√©ges" }
        ]},
        { cat: "1.2.0 SZOFTVER", items: [
            { id: "1.2.1", t: "Image Verzi√≥ aktu√°lis?", g: "OS-Info-t elind√≠tani\nWindows 10 Enterprise 2019 LTSC\nBluePC Image ZAS - Win10 x64 LTSC 2019 EBF 3.8\n\nVisu kis pultok:\nWindows 10 Enterprise 2019 LTSC\nBluePC Image ZAS - Win10 x64 LTSC 2019 HVO62 3.3" },
            { id: "1.2.2", t: "TIA Portal verzi√≥ megfelel≈ë?", g: "TIA verzi√≥ ellen≈ërz√©s V16 UB" },
            { id: "1.2.3", t: "Safety verzi√≥ megfelel≈ë?", g: "TIA verzi√≥ ellen≈ërz√©s" },
            { id: "1.2.4", t: "Integra Designer verzi√≥?", g: "D:\\integra\\System\\SIS\\IntegraDesignerPro.exe verzi√≥sz√°ma\n6.9.7.0 vagy\nIntegra System Manager-ben (Verwaltung) leellen≈ërizni a g√©peket:\nOnline/System/Update range" }
        ]},
        { cat: "1.3.0 HARDWARE", items: [
             { id: "1.3.1", t: "PC feliratozva?", g: "Pult jel√∂l√©s (Nyomtatva vagy grav√≠rozva)\nHelyileg ellen≈ërizni" }
        ]},
        { cat: "1.4.0 RENDSZER", items: [
            { id: "1.4.1", t: "Rendszerdiagnosztika hiba n√©lk√ºl?", g: "Integra System Manager-ben (Verwaltung) test/friss√≠teni a g√©peket.\nNincs piros √°llapot" },
            { id: "1.4.2", t: "IntegraCheck OK?", g: "VMC, Vizualiz√°ci√≥:\nMen√º/IntegraCheck" },
            { id: "1.4.3", t: "Mozg√°sk√©pek rendben?", g: "Minden Visu-ban ellen≈ërizni a Mozg√°s k√©perny≈ëket.\nIr√°nyok megfelel≈ëek, j√≥l csoportos√≠tottak a mozg√°sok\nAz egyes pultokr√≥l csak a bel√°that√≥ elemek mozgathat√≥k" },
            { id: "1.4.4", t: "Interf√©sz k√©pek rendben?", g: "Mozg√°s k√©perny≈ë ikonja mellett van a men√ºpont (kapcsol√≥d√°si pont)\nNem minden ter√ºletnek van. √ñn√°ll√≥ Anlage-nek nincs (ami nem ad √°t, vagy nem vesz el m√°s sort√≥l alapanyagot)." },
            { id: "1.4.5", t: "Designer Templates OK?", g: "Integra System Manager-ben (Verwaltung) leellen≈ërizni a g√©peket.\nHa a System z√∂ld, akkor nem v√°ltoztattak lok√°lisan az .ini f√°jlokon" },
            { id: "1.4.6", t: "Scriptek dokument√°lva?", g: "idPro projektet let√∂lteni a Versionierung-gal √©s F12-vel ellen≈ërizni az egyes k√©perny≈ëk√∂n, hogy van-e egyedi script. Ha van, akkor ahhoz dokument√°ci√≥ is kell, hogy tartozzon (IDS f√°jlok)" },
            { id: "1.4.7", t: "Nyelv be√°ll√≠tva?", g: "Ellen≈ërizni a nyelvv√°lt√°st a Visu-ban" }
        ]},
        { cat: "1.6.0 KIEG√âSZ√çT√âSEK", items: [
            { id: "1.6.1", t: "Mintaprojektek betartva?", g: "Ellen≈ërizni a mintaprojektek (RB, MO, FT) el≈ë√≠r√°sait." },
            { id: "1.6.2", t: "Tech param√©terek j√≥ helyen?", g: "Ellen≈ërizni a D:\\CMWProjekt mapp√°t" },
            { id: "1.6.3", t: "IntegraShell konfigur√°ci√≥?", g: "Ha j√≥l m≈±k√∂dik a Shell, akkor, ha kijelentkez√ºnk, akkor tiltja a programok futtat√°s√°t, ablakv√°lt√°st, stb." },
            { id: "1.6.4", t: "EKM kapcsolat?", g: "Szerverr≈ël kapja. Ha az Update j√≥, akkor az EKM-nek is j√≥nak kell lennie" },
            { id: "1.6.5", t: "isiSave be√°ll√≠tva?", g: "vagy VisualisierungInfo -> EKB logo a l√°bl√©cben\nisiSave programban (archivierung) ellen≈ërizni, hogy van-e automatikus ment√©s a PC-kre" },
            { id: "1.6.6", t: "Index-Szerver OK?", g: "Ha a Systemmanager-ben l√°tjuk Online a PC-ket, akkor j√≥ az index-szerver be√°ll√≠t√°sa\nA topol√≥gi√°ban nincs az index-szerver sz√°m√°ra ismeretlen g√©p (nincs olyan g√©p az online topol√≥gi√°ban, ami nincs a system manager list√°j√°ban)" },
            { id: "1.6.8", t: "SIS Log tiszta?", g: "Trend-ben (IntegraView Admin) az Admin/Profile -> SPS/Bearbeiten alatt a Bearbeiten-t ellen≈ërizni\nD:\\integra\\System\\Logs\\SisServer.csv-t megnyitni.\nEllen≈ërizni, hogy tartalmaz-e log-okat" },
            { id: "1.6.9", t: "Mappastrukt√∫ra OK?", g: "a CMWProjekt mappa fel√©p√≠t√©se az el≈ë√≠r√°s szerinti" },
            { id: "1.6.10", t: "Szem√©t t√∂r√∂lve?", g: "Nincs m√°s TIA projekt a mapp√°ban" },
            { id: "1.6.11", t: "V√≠rusirt√≥ friss√ºl?", g: "Antiv√≠rus szoftver telep√≠tve" }
        ]},
        { cat: "2.1.0 PLC (SPS)", items: [
            { id: "2.1.1", t: "Minden PLC ter√ºlet l√°tszik?", g: "Minden PLC ter√ºlet megtal√°lhat√≥ a Ter√ºlet v√°laszt√≥ k√©perny≈ën?" },
            { id: "2.1.2", t: "Minden ter√ºletnek van vizuja?", g: "Van minden PLC (SPS) ter√ºlethez megtervezett vizualiz√°ci√≥s k√©p?" },
            { id: "2.1.3", t: "Full HD felbont√°s?", g: "Az integra Projekttervez≈ëben a Full HD felbont√°s lett kiv√°lasztva?" },
            { id: "2.1.4", t: "Calibri 10 Bold?", g: "Az √∂sszes elemhez a Calibri bet≈±t√≠pus, f√©lk√∂v√©r, 10-es m√©ret √©s a 'balra igaz√≠t√°s' lett-e haszn√°lva?" },
            { id: "2.1.5", t: "Pult 99 (Nyers) ablak?", g: "A 99-es pultter√ºlet (Rohbau) az √°ttekint≈ë k√©pet a helyettes√≠t≈ë ablak funkci√≥val jelen√≠tett√©k meg?" },
            { id: "2.1.6", t: "PNG √°tl√°tsz√≥ k√©pek?", g: "A k√©pek megjelen√≠t√©s√©hez PNG form√°tum ker√ºlt kiv√°laszt√°sra, legfeljebb kb. 100 KB-os c√©lzott f√°jlm√©rettel? El≈ënyben kell r√©szes√≠teni a CAD-rajzokat, p√©ld√°ul funkci√≥elrendez√©si tervekb≈ël, szersz√°m√°ttekint≈ëkb≈ël stb" }
        ]},
        { cat: "2.2.0 K√âPERNY≈êK", items: [
            { id: "2.2.1", t: "√Åttekint≈ë k√©pek OK?", g: "Az √°ttekint≈ë k√©perny≈ëk a szab√°lyzat (ir√°nyelv) szerint lettek megtervezve?" },
            { id: "2.3.1", t: "Pult k√©pek OK?", g: "A vez√©rl≈ëpult ter√ºleti k√©perny≈ëk az ir√°nyelv szerint lettek megtervezve?" },
            { id: "2.4.1", t: "√Ållom√°s k√©pek OK?", g: "A vez√©rl≈ëpult r√©szletez≈ë k√©perny≈ëk az ir√°nyelv szerint lettek megtervezve?" },
            { id: "2.5.1", t: "Speci√°lis funkci√≥k OK?", g: "A speci√°lis funkci√≥k az ir√°nyelv szerint lettek megtervezve?" },
            { id: "2.5.4", t: "Robot √°ttekint≈ëk OK?", g: "A robotok √°ttekint≈ë k√©perny≈ëi az ir√°nyelv szerint lettek megtervezve?" },
            { id: "2.6.1", t: "Nincs Station/Pult elem?", g: "Nem ker√ºltek alkalmaz√°sra magasabb szint≈± elemek, mint p√©ld√°ul az √°llom√°s vagy a vez√©rl≈ëpult, hogy elker√ºlj√©k a t√∂bbsz√∂r√∂s hibajelz√©seket." },
            { id: "2.6.2", t: "V√©szle√°ll√≠t√≥ (SonderBit)?", g: "Nem lett haszn√°lva v√©szle√°ll√≠t√≥ elem a v√°laszt√≥list√°b√≥l. Ehhez a funkci√≥hoz a r√©szletes k√©pen a sablon tal√°lhat√≥: 'DYN_GEN_SonderBit_Endlage_Absolut' vagy 'DYN_GEN_SonderBit_LED_Absolut'" },
            { id: "2.6.3", t: "R√©szletk√©pek OK?", g: "A st√°ci√≥ r√©szletes k√©perny≈ë az ir√°nyelv szerint lettek megtervezve?" }
        ]}
    ];

    const root = document.getElementById('root');

    function render() {
        data.forEach((sect, idx) => {
            const h = document.createElement('div');
            h.className = 'section-header';
            h.innerHTML = `<span>${sect.cat}</span> <span>‚ñº</span>`;
            h.onclick = () => document.getElementById(`sec-${idx}`).classList.toggle('active');
            
            const c = document.createElement('div');
            c.className = 'section-content';
            c.id = `sec-${idx}`;
            if(idx === 0) c.classList.add('active'); // Csak az els≈ë nyitva mobilon

            sect.items.forEach(item => {
                const uid = item.id.replace(/\./g, '_');
                c.innerHTML += `
                    <div class="item-box" id="box-${uid}">
                        <span class="id-tag">${item.id}</span>
                        <div class="q-text">${item.t}</div>
                        
                        <div class="btn-row">
                            <button class="btn-guide" onclick="toggleDetails('${uid}')">?</button>
                            <button class="btn-ok" onclick="setStatus('${uid}', 'OK')">OK</button>
                            <button class="btn-nok" onclick="setStatus('${uid}', 'NOK')">NOK</button>
                        </div>

                        <div class="details" id="det-${uid}">
                            <div class="guide-box">${item.g}</div>
                            <textarea placeholder="Megjegyz√©s √≠r√°sa..." id="com-${uid}"></textarea>
                            <label class="file-upload">
                                üì∑ K√©p csatol√°sa
                                <input type="file" accept="image/*" style="display:none" onchange="loadImg(event, '${uid}')">
                            </label>
                            <img id="img-${uid}" class="img-preview">
                        </div>
                    </div>
                `;
            });
            root.appendChild(h);
            root.appendChild(c);
        });
        document.getElementById('p-date').innerText = new Date().toLocaleString();
    }

    function toggleDetails(uid) {
        const el = document.getElementById(`det-${uid}`);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    function setStatus(uid, s) {
        const box = document.getElementById(`box-${uid}`);
        const btns = box.querySelectorAll('.btn-row button');
        
        btns[1].classList.remove('active');
        btns[2].classList.remove('active');

        box.setAttribute('data-status', s);

        if(s === 'OK') {
            btns[1].classList.add('active');
        } else {
            btns[2].classList.add('active');
            document.getElementById(`det-${uid}`).style.display = 'block';
        }
        calc();
    }

    function loadImg(e, uid) {
        const img = document.getElementById(`img-${uid}`);
        img.src = URL.createObjectURL(e.target.files[0]);
        img.style.display = 'block';
        document.getElementById(`det-${uid}`).style.display = 'block';
    }

    function calc() {
        const all = document.querySelectorAll('.item-box').length;
        const ok = document.querySelectorAll('.item-box[data-status="OK"]').length;
        const pct = Math.round((ok/all)*100);
        document.getElementById('scoreDisplay').innerText = pct + "%";
        document.getElementById('p-score').innerText = pct + "%";
    }

    function syncData() {
        document.getElementById('p-dev').innerText = document.getElementById('devName').value;
        document.getElementById('p-op').innerText = document.getElementById('opName').value;
    }

    function savePDF() {
        const name = document.getElementById('devName').value;
        if(!name) { alert("Add meg a g√©p nev√©t!"); return; }
        document.title = name + "_Jegyzokonyv";
        syncData();
        
        // TR√úKK: Nyomtat√°s el≈ëtt kinyitjuk az √∂sszes szekci√≥t, hogy minden l√°tsz√≥djon
        document.querySelectorAll('.section-content').forEach(el => el.classList.add('active'));
        
        window.print();
    }

    render();
</script>

</body>
</html>